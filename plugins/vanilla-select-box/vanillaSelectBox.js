function vanillaSelectBox(t,e){this.domSelector=t,this.root=document.querySelector(t),this.main,this.button,this.title,this.isMultiple=this.root.hasAttribute("multiple"),this.multipleSize=this.isMultiple&&this.root.hasAttribute("size")?parseInt(this.root.getAttribute("size")):-1,this.drop,this.top,this.left,this.options,this.listElements,this.isDisabled=!1,this.search=!1,this.searchZone=null,this.inputBox=null,this.ulminWidth=140,this.ulminHeight=25,this.userOptions={maxWidth:500,maxHeight:400,translations:{all:"Любой",items:"выбрано"},search:!1,placeHolder:""},e&&(null!=e.maxWidth&&(this.userOptions.maxWidth=e.maxWidth),null!=e.maxHeight&&(this.userOptions.maxHeight=e.maxHeight),null!=e.translations&&(this.userOptions.translations=e.translations),null!=e.placeHolder&&(this.userOptions.placeHolder=e.placeHolder),null!=e.search&&(this.search=e.search)),this.init()}vanillaSelectBox.prototype.init=function(){let t=this;this.root.style.display="none";let e=document.getElementById("btn-group-"+t.domSelector);e&&e.remove(),this.main=document.createElement("div"),this.root.parentNode.insertBefore(this.main,this.root.nextSibling),this.main.classList.add("vsb-main"),this.main.setAttribute("id","btn-group-"+this.domSelector),this.main.style.marginLeft=this.main.style.marginLeft,this.button=document.createElement("button");this.main.value;this.main.appendChild(this.button),this.title=document.createElement("span"),this.button.appendChild(this.title),this.title.classList.add("title");let i=document.createElement("span");this.button.appendChild(i),i.classList.add("caret"),i.style.position="absolute",i.style.right="8px",i.style.marginTop="8px";let s=this.button.getBoundingClientRect();this.top=s.bottom,this.left=s.left,this.drop=document.createElement("div"),this.main.appendChild(this.drop),this.drop.classList.add("vsb-menu");let l=document.createElement("ul");this.drop.appendChild(l),l.style.maxHeight=this.userOptions.maxHeight+"px",l.style.minWidth=this.ulminWidth+"px",l.style.minHeight=this.ulminHeight+"px",this.isMultiple&&l.classList.add("multi");let o="",n="",a=0;if(this.search){this.searchZone=document.createElement("div"),l.appendChild(this.searchZone),this.searchZone.classList.add("vsb-js-search-zone"),this.inputBox=document.createElement("input"),this.searchZone.appendChild(this.inputBox),this.inputBox.setAttribute("type","text"),this.inputBox.setAttribute("id","search_"+this.domSelector);let e=this.isMultiple?"8px":"6px";var r=document.createElement("p");l.appendChild(r),r.style.fontSize=e,r.innerHTML="&nbsp;",l.addEventListener("scroll",function(e){var i=this.scrollTop;t.searchZone.parentNode.style.top=i+"px"})}if(this.options=document.querySelectorAll(this.domSelector+" option"),Array.prototype.slice.call(this.options).forEach(function(e){let i=e.textContent,s=e.value,r=e.getAttribute("class"),c=document.createElement("li"),p=e.hasAttribute("selected");l.appendChild(c),c.setAttribute("data-value",s),c.setAttribute("data-text",i),r&&c.classList.add(r),p&&(a++,o+=n+i,n=",",c.classList.add("active"),t.isMultiple||(t.title.textContent=i,r&&t.title.classList.add(r))),c.appendChild(document.createTextNode(i))}),-1!=t.multipleSize&&a>t.multipleSize){let e=t.userOptions.translations.items||"items";o=a+" "+e}function c(){document.removeEventListener("click",c),t.drop.style.display="none",t.search&&(t.inputBox.value="",Array.prototype.slice.call(t.listElements).forEach(function(t){t.classList.remove("hide")}))}t.isMultiple&&(t.title.innerHTML=o),""!=t.userOptions.placeHolder&&""==t.title.textContent&&(t.title.textContent=t.userOptions.placeHolder),this.listElements=this.drop.querySelectorAll("li"),t.search&&t.inputBox.addEventListener("keyup",function(e){let i=e.target.value.toUpperCase();i.length<2?Array.prototype.slice.call(t.listElements).forEach(function(t){t.classList.remove("hide")}):Array.prototype.slice.call(t.listElements).forEach(function(t){-1==t.getAttribute("data-text").toUpperCase().indexOf(i)?t.classList.add("hide"):t.classList.remove("hide")})}),this.main.addEventListener("click",function(e){t.isDisabled||(t.drop.style.left=t.left+"px",t.drop.style.top=t.top+"px",t.drop.style.display="block",document.addEventListener("click",c),e.preventDefault(),e.stopPropagation())}),this.drop.addEventListener("click",function(e){if(!e.target.hasAttribute("data-value"))return e.preventDefault(),void e.stopPropagation();let i=e.target.getAttribute("data-value"),s=e.target.getAttribute("data-text"),l=e.target.getAttribute("class");if(t.isMultiple){let s=!1;l&&(s=-1!=l.indexOf("active")),s?e.target.classList.remove("active"):e.target.classList.add("active");let o="",n="",a=0,r=0;for(let e=0;e<t.options.length;e++)r++,t.options[e].value==i&&(t.options[e].selected=!s),t.options[e].selected&&(a++,o+=n+t.options[e].textContent,n=",");if(r==a){o=t.userOptions.translations.all||"all"}else if(-1!=t.multipleSize&&a>t.multipleSize){o=a+" "+(t.userOptions.translations.items||"items")}t.title.textContent=o,t.privateSendChange()}else t.root.value=i,t.title.textContent=s,l?t.title.setAttribute("class",l+" title"):t.title.setAttribute("class","title"),Array.prototype.slice.call(t.listElements).forEach(function(t){t.classList.remove("active")}),""!=s&&e.target.classList.add("active"),t.privateSendChange(),c();e.preventDefault(),e.stopPropagation(),""!=t.userOptions.placeHolder&&""==t.title.textContent&&(t.title.textContent=t.userOptions.placeHolder)})},vanillaSelectBox.prototype.setValue=function(t){let e=this;if(null==t||null==t||""==t)e.empty();else if(e.isMultiple){"string"==i(t)&&("all"==t?(t=[],Array.prototype.slice.call(e.options).forEach(function(e){t.push(e.value)})):t=t.split(","));let s=[];if("array"==i(t)){Array.prototype.slice.call(e.options).forEach(function(e){-1!=t.indexOf(e.value)?(e.selected=!0,s.push(e.value)):e.selected=!1});let i="",l="",o=0,n=0;if(Array.prototype.slice.call(e.listElements).forEach(function(t){n++,-1!=s.indexOf(t.getAttribute("data-value"))?(t.classList.add("active"),o++,i+=l+t.getAttribute("data-text"),l=","):t.classList.remove("active")}),n==o){let t=e.userOptions.translations.all||"all";i=t}else if(-1!=e.multipleSize&&o>e.multipleSize){let t=e.userOptions.translations.items||"items";i=o+" "+t}e.title.textContent=i,e.privateSendChange()}}else{let i=!1,s="";Array.prototype.slice.call(e.listElements).forEach(function(e){e.getAttribute("data-value")==t?(e.classList.add("active"),i=!0,s=e.getAttribute("data-text")):e.classList.remove("active")}),Array.prototype.slice.call(e.options).forEach(function(e){e.value==t?(e.selected=!0,className=e.getAttribute("class"),className||(className="")):e.selected=!1}),i&&(e.title.textContent=s,""!=e.userOptions.placeHolder&&""==e.title.textContent&&(e.title.textContent=e.userOptions.placeHolder),""!=className?e.title.setAttribute("class",className+" title"):e.title.setAttribute("class","title"))}function i(t){return Object.prototype.toString.call(t).replace("[object ","").replace("]","").toLowerCase()}},vanillaSelectBox.prototype.privateSendChange=function(){let t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.root.dispatchEvent(t)},vanillaSelectBox.prototype.empty=function(){Array.prototype.slice.call(this.listElements).forEach(function(t){t.classList.remove("active")}),Array.prototype.slice.call(this.options).forEach(function(t){t.selected=!1}),this.title.textContent="",""!=this.userOptions.placeHolder&&""==this.title.textContent&&(this.title.textContent=this.userOptions.placeHolder),this.privateSendChange()},vanillaSelectBox.prototype.destroy=function(){let t=document.getElementById("btn-group-"+this.domSelector);t&&(t.remove(),this.root.style.display="inline-block")},vanillaSelectBox.prototype.disable=function(){let t=document.getElementById("btn-group-"+this.domSelector);t&&(button=t.querySelector("button"),button.classList.add("disabled"),this.isDisabled=!0)},vanillaSelectBox.prototype.enable=function(){let t=document.getElementById("btn-group-"+this.domSelector);t&&(button=t.querySelector("button"),button.classList.remove("disabled"),this.isDisabled=!1)},vanillaSelectBox.prototype.showOptions=function(){console.log(this.userOptions)},"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});